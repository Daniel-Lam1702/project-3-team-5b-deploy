<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: node_modules/proxy-from-env/index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: node_modules/proxy-from-env/index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

var parseUrl = require('url').parse;

var DEFAULT_PORTS = {
  ftp: 21,
  gopher: 70,
  http: 80,
  https: 443,
  ws: 80,
  wss: 443,
};

var stringEndsWith = String.prototype.endsWith || function(s) {
  return s.length &lt;= this.length &amp;&amp;
    this.indexOf(s, this.length - s.length) !== -1;
};

/**
 * @param {string|object} url - The URL, or the result from url.parse.
 * @return {string} The URL of the proxy that should handle the request to the
 *  given URL. If no proxy is set, this will be an empty string.
 */
function getProxyForUrl(url) {
  var parsedUrl = typeof url === 'string' ? parseUrl(url) : url || {};
  var proto = parsedUrl.protocol;
  var hostname = parsedUrl.host;
  var port = parsedUrl.port;
  if (typeof hostname !== 'string' || !hostname || typeof proto !== 'string') {
    return '';  // Don't proxy URLs without a valid scheme or host.
  }

  proto = proto.split(':', 1)[0];
  // Stripping ports in this way instead of using parsedUrl.hostname to make
  // sure that the brackets around IPv6 addresses are kept.
  hostname = hostname.replace(/:\d*$/, '');
  port = parseInt(port) || DEFAULT_PORTS[proto] || 0;
  if (!shouldProxy(hostname, port)) {
    return '';  // Don't proxy URLs that match NO_PROXY.
  }

  var proxy =
    getEnv('npm_config_' + proto + '_proxy') ||
    getEnv(proto + '_proxy') ||
    getEnv('npm_config_proxy') ||
    getEnv('all_proxy');
  if (proxy &amp;&amp; proxy.indexOf('://') === -1) {
    // Missing scheme in proxy, default to the requested URL's scheme.
    proxy = proto + '://' + proxy;
  }
  return proxy;
}

/**
 * Determines whether a given URL should be proxied.
 *
 * @param {string} hostname - The host name of the URL.
 * @param {number} port - The effective port of the URL.
 * @returns {boolean} Whether the given URL should be proxied.
 * @private
 */
function shouldProxy(hostname, port) {
  var NO_PROXY =
    (getEnv('npm_config_no_proxy') || getEnv('no_proxy')).toLowerCase();
  if (!NO_PROXY) {
    return true;  // Always proxy if NO_PROXY is not set.
  }
  if (NO_PROXY === '*') {
    return false;  // Never proxy if wildcard is set.
  }

  return NO_PROXY.split(/[,\s]/).every(function(proxy) {
    if (!proxy) {
      return true;  // Skip zero-length hosts.
    }
    var parsedProxy = proxy.match(/^(.+):(\d+)$/);
    var parsedProxyHostname = parsedProxy ? parsedProxy[1] : proxy;
    var parsedProxyPort = parsedProxy ? parseInt(parsedProxy[2]) : 0;
    if (parsedProxyPort &amp;&amp; parsedProxyPort !== port) {
      return true;  // Skip if ports don't match.
    }

    if (!/^[.*]/.test(parsedProxyHostname)) {
      // No wildcards, so stop proxying if there is an exact match.
      return hostname !== parsedProxyHostname;
    }

    if (parsedProxyHostname.charAt(0) === '*') {
      // Remove leading wildcard.
      parsedProxyHostname = parsedProxyHostname.slice(1);
    }
    // Stop proxying if the hostname ends with the no_proxy host.
    return !stringEndsWith.call(hostname, parsedProxyHostname);
  });
}

/**
 * Get the value for an environment variable.
 *
 * @param {string} key - The name of the environment variable.
 * @return {string} The value of the environment variable.
 * @private
 */
function getEnv(key) {
  return process.env[key.toLowerCase()] || process.env[key.toUpperCase()] || '';
}

exports.getProxyForUrl = getProxyForUrl;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="Chart.helpers.html">helpers</a></li><li><a href="Chart.helpers.easing.effects.html">effects</a></li><li><a href="Chart.helpers.math.html">math</a></li></ul><h3>Classes</h3><ul><li><a href="Axios.html">Axios</a></li><li><a href="Axios$1.html">Axios$1</a></li><li><a href="CancelToken.html">CancelToken</a></li><li><a href="CancelToken$1.html">CancelToken$1</a></li><li><a href="FormData.html">FormData</a></li></ul><h3>Global</h3><ul><li><a href="global.html#App">App</a></li><li><a href="global.html#AppContent">AppContent</a></li><li><a href="global.html#AxiosError">AxiosError</a></li><li><a href="global.html#AxiosError$1">AxiosError$1</a></li><li><a href="global.html#AxiosURLSearchParams">AxiosURLSearchParams</a></li><li><a href="global.html#CanceledError">CanceledError</a></li><li><a href="global.html#CanceledError$1">CanceledError$1</a></li><li><a href="global.html#Cart">Cart</a></li><li><a href="global.html#CartItem">CartItem</a></li><li><a href="global.html#CashierHome">CashierHome</a></li><li><a href="global.html#CashierNavbar">CashierNavbar</a></li><li><a href="global.html#CashierOrderPage">CashierOrderPage</a></li><li><a href="global.html#Checkout">Checkout</a></li><li><a href="global.html#CustomerHome">CustomerHome</a></li><li><a href="global.html#Employee">Employee</a></li><li><a href="global.html#EntreeChoices">EntreeChoices</a></li><li><a href="global.html#FIELD_NAME_REGEXP">FIELD_NAME_REGEXP</a></li><li><a href="global.html#Inventory">Inventory</a></li><li><a href="global.html#InventoryManager">InventoryManager</a></li><li><a href="global.html#InventoryReport">InventoryReport</a></li><li><a href="global.html#Login">Login</a></li><li><a href="global.html#ManageStuff">ManageStuff</a></li><li><a href="global.html#ManagerMenuHome">ManagerMenuHome</a></li><li><a href="global.html#ManagerMenuItems">ManagerMenuItems</a></li><li><a href="global.html#MenuBoard">MenuBoard</a></li><li><a href="global.html#MenuItem">MenuItem</a></li><li><a href="global.html#MenuItemEditForm">MenuItemEditForm</a></li><li><a href="global.html#MenuPage">MenuPage</a></li><li><a href="global.html#Navbar">Navbar</a></li><li><a href="global.html#ReadableAsyncKit">ReadableAsyncKit</a></li><li><a href="global.html#ReadableParallel">ReadableParallel</a></li><li><a href="global.html#ReadableSerial">ReadableSerial</a></li><li><a href="global.html#ReadableSerialOrdered">ReadableSerialOrdered</a></li><li><a href="global.html#Sales">Sales</a></li><li><a href="global.html#SalesReport">SalesReport</a></li><li><a href="global.html#SideChoices">SideChoices</a></li><li><a href="global.html#Weather">Weather</a></li><li><a href="global.html#_arrayUnique">_arrayUnique</a></li><li><a href="global.html#_filterBetween">_filterBetween</a></li><li><a href="global.html#abort">abort</a></li><li><a href="global.html#addRoundedRectPath">addRoundedRectPath</a></li><li><a href="global.html#append">append</a></li><li><a href="global.html#arrayToObject">arrayToObject</a></li><li><a href="global.html#ascending">ascending</a></li><li><a href="global.html#assertOptions">assertOptions</a></li><li><a href="global.html#async">async</a></li><li><a href="global.html#buildFullPath">buildFullPath</a></li><li><a href="global.html#buildURL">buildURL</a></li><li><a href="global.html#callback">callback</a></li><li><a href="global.html#capitalizeWords">capitalizeWords</a></li><li><a href="global.html#charset">charset</a></li><li><a href="global.html#clean">clean</a></li><li><a href="global.html#clearCanvas">clearCanvas</a></li><li><a href="global.html#clone">clone</a></li><li><a href="global.html#cloudinary">cloudinary</a></li><li><a href="global.html#combineURLs">combineURLs</a></li><li><a href="global.html#contentType">contentType</a></li><li><a href="global.html#createInstance">createInstance</a></li><li><a href="global.html#debounce">debounce</a></li><li><a href="global.html#defer">defer</a></li><li><a href="global.html#deleteProperty">deleteProperty</a></li><li><a href="global.html#descending">descending</a></li><li><a href="global.html#destroy">destroy</a></li><li><a href="global.html#dispatchBeforeRedirect">dispatchBeforeRedirect</a></li><li><a href="global.html#dispatchRequest">dispatchRequest</a></li><li><a href="global.html#encode">encode</a></li><li><a href="global.html#encode$1">encode$1</a></li><li><a href="global.html#endsWith">endsWith</a></li><li><a href="global.html#extend">extend</a></li><li><a href="global.html#extension">extension</a></li><li><a href="global.html#finisher">finisher</a></li><li><a href="global.html#finiteOrDefault">finiteOrDefault</a></li><li><a href="global.html#forEach">forEach</a></li><li><a href="global.html#forEachEntry">forEachEntry</a></li><li><a href="global.html#formDataToJSON">formDataToJSON</a></li><li><a href="global.html#freezeMethods">freezeMethods</a></li><li><a href="global.html#get">get</a></li><li><a href="global.html#getCanvasPosition">getCanvasPosition</a></li><li><a href="global.html#getDatasetAtEvent">getDatasetAtEvent</a></li><li><a href="global.html#getElementAtEvent">getElementAtEvent</a></li><li><a href="global.html#getElementsAtEvent">getElementsAtEvent</a></li><li><a href="global.html#getOwnPropertyDescriptor">getOwnPropertyDescriptor</a></li><li><a href="global.html#getPrototypeOf">getPrototypeOf</a></li><li><a href="global.html#getProxyForUrl">getProxyForUrl</a></li><li><a href="global.html#getRelativePosition">getRelativePosition</a></li><li><a href="global.html#has">has</a></li><li><a href="global.html#hasStandardBrowserEnv">hasStandardBrowserEnv</a></li><li><a href="global.html#hasStandardBrowserWebWorkerEnv">hasStandardBrowserWebWorkerEnv</a></li><li><a href="global.html#inherits">inherits</a></li><li><a href="global.html#isAbsoluteURL">isAbsoluteURL</a></li><li><a href="global.html#isArray">isArray</a></li><li><a href="global.html#isArrayBuffer">isArrayBuffer</a></li><li><a href="global.html#isArrayBufferView">isArrayBufferView</a></li><li><a href="global.html#isAxiosError$1">isAxiosError$1</a></li><li><a href="global.html#isBlob">isBlob</a></li><li><a href="global.html#isBoolean">isBoolean</a></li><li><a href="global.html#isBuffer">isBuffer</a></li><li><a href="global.html#isDate">isDate</a></li><li><a href="global.html#isFile">isFile</a></li><li><a href="global.html#isFileList">isFileList</a></li><li><a href="global.html#isFlatArray">isFlatArray</a></li><li><a href="global.html#isFormData">isFormData</a></li><li><a href="global.html#isFunction">isFunction</a></li><li><a href="global.html#isNullOrUndef">isNullOrUndef</a></li><li><a href="global.html#isNumber">isNumber</a></li><li><a href="global.html#isNumberFinite">isNumberFinite</a></li><li><a href="global.html#isObject">isObject</a></li><li><a href="global.html#isPlainObject">isPlainObject</a></li><li><a href="global.html#isRegExp">isRegExp</a></li><li><a href="global.html#isSpecCompliantForm">isSpecCompliantForm</a></li><li><a href="global.html#isStream">isStream</a></li><li><a href="global.html#isString">isString</a></li><li><a href="global.html#isTypedArray">isTypedArray</a></li><li><a href="global.html#isURLSearchParams">isURLSearchParams</a></li><li><a href="global.html#isUndefined">isUndefined</a></li><li><a href="global.html#isVisitable">isVisitable</a></li><li><a href="global.html#iterate">iterate</a></li><li><a href="global.html#lookup">lookup</a></li><li><a href="global.html#matchAll">matchAll</a></li><li><a href="global.html#merge">merge</a></li><li><a href="global.html#mergeConfig$1">mergeConfig$1</a></li><li><a href="global.html#monotoneAdjust">monotoneAdjust</a></li><li><a href="global.html#niceNum">niceNum</a></li><li><a href="global.html#noop">noop</a></li><li><a href="global.html#ownKeys">ownKeys</a></li><li><a href="global.html#parallel">parallel</a></li><li><a href="global.html#parseBorderRadius$1">parseBorderRadius$1</a></li><li><a href="global.html#parseHeaders">parseHeaders</a></li><li><a href="global.html#parsePropPath">parsePropPath</a></li><li><a href="global.html#pathArc">pathArc</a></li><li><a href="global.html#rThetaToXY">rThetaToXY</a></li><li><a href="global.html#readUsedSize">readUsedSize</a></li><li><a href="global.html#removeBrackets">removeBrackets</a></li><li><a href="global.html#renderKey">renderKey</a></li><li><a href="global.html#renderText">renderText</a></li><li><a href="global.html#requestAnimFrame">requestAnimFrame</a></li><li><a href="global.html#resolve">resolve</a></li><li><a href="global.html#retinaScale">retinaScale</a></li><li><a href="global.html#runJob">runJob</a></li><li><a href="global.html#serial">serial</a></li><li><a href="global.html#serialOrdered">serialOrdered</a></li><li><a href="global.html#set">set</a></li><li><a href="global.html#setProxy">setProxy</a></li><li><a href="global.html#settle">settle</a></li><li><a href="global.html#speedometer">speedometer</a></li><li><a href="global.html#splineCurveMonotone">splineCurveMonotone</a></li><li><a href="global.html#spread$1">spread$1</a></li><li><a href="global.html#state">state</a></li><li><a href="global.html#streamer">streamer</a></li><li><a href="global.html#stringifySafely">stringifySafely</a></li><li><a href="global.html#stripBOM">stripBOM</a></li><li><a href="global.html#terminator">terminator</a></li><li><a href="global.html#throttle">throttle</a></li><li><a href="global.html#throttled">throttled</a></li><li><a href="global.html#throwIfCancellationRequested">throwIfCancellationRequested</a></li><li><a href="global.html#toArray">toArray</a></li><li><a href="global.html#toFlatObject">toFlatObject</a></li><li><a href="global.html#toFormData">toFormData</a></li><li><a href="global.html#toFormData$1">toFormData$1</a></li><li><a href="global.html#toLineHeight">toLineHeight</a></li><li><a href="global.html#toPadding">toPadding</a></li><li><a href="global.html#toTRBL">toTRBL</a></li><li><a href="global.html#toTRBLCorners">toTRBLCorners</a></li><li><a href="global.html#transformData">transformData</a></li><li><a href="global.html#trim">trim</a></li><li><a href="global.html#uid">uid</a></li><li><a href="global.html#useFetchData">useFetchData</a></li><li><a href="global.html#valueOrDefault">valueOrDefault</a></li><li><a href="global.html#vary">vary</a></li><li><a href="global.html#wrapCallback">wrapCallback</a></li><li><a href="global.html#wrapIterator">wrapIterator</a></li><li><a href="global.html#wrapIteratorCallback">wrapIteratorCallback</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Tue Dec 10 2024 19:10:15 GMT-0600 (Central Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
